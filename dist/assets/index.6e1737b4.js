var x=Object.defineProperty;var p=(e,i,t)=>i in e?x(e,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[i]=t;var l=(e,i,t)=>(p(e,typeof i!="symbol"?i+"":i,t),t);const H=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const h of r.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}};H();const{random:w}=Math,f=(e,i,t)=>L(e).addEventListener(i,t),S=()=>`hsla(${~~(Math.random()*360)}, 100%, 30%, 1)`,L=document.querySelector.bind(document);document.querySelectorAll.bind(document);const g=e=>e[~~(w()*e.length)],P=(e,i)=>setTimeout(i,e),b=(e,i,t=()=>!1)=>{const n=setInterval(()=>{i(),t()&&clearInterval(n)},e)};class d{constructor(){this.canvas=document.createElement("canvas"),this.setSize(),b(1e4,()=>{document.body.animate({background:[S()]},{duration:300,fill:"forwards"})})}setSize(){this.canvas.width=innerWidth,this.canvas.height=innerHeight}context(){return this.canvas.getContext("2d")}element(){return this.canvas}}l(d,"counter",0);class u{constructor(i){this.ctx=i}}const o={padding:20,scoreLocation:100,needleWidth:10,needleSizeDecreaseForALoss:20};class y extends u{constructor(t,n="right",s=!1){super(t);l(this,"mouseMoveHandler",t=>{this.y=t.y-this.calculateHeight()/2});this.score=0,this.width=o.needleWidth,this.height=200,this.color="white",this.side=n,this.y=innerHeight/2,s&&(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?f("canvas","touchmove",this.mouseMoveHandler):f("canvas","mousemove",this.mouseMoveHandler))}calculateHeight(){return this.height+this.score}draw(){this.ctx.beginPath(),this.ctx.fillStyle=this.color;let t=o.padding;this.side=="right"&&(t=innerWidth-o.padding-o.needleWidth),this.ctx.fillRect(t,this.y,this.width,this.calculateHeight()),this.ctx.closePath()}update(){this.y<0&&(this.y=0),this.y>innerHeight-this.calculateHeight()&&(this.y=innerHeight-this.calculateHeight()),this.draw()}isInRange(t,n){return t>this.y&&n<this.y+this.calculateHeight()}isTouchingBall(t){const n=t.y+t.radius,s=t.y-t.radius,r=n>this.y&&n<this.y+this.calculateHeight(),h=s<this.y+this.calculateHeight()&&s>this.y;return r||h}lost(){this.score=this.score-o.needleSizeDecreaseForALoss,this.color="rgba(135, 0, 0, .8)",P(2e3,()=>{this.color="white"})}}class C{constructor(i,t){this.x=i,this.y=t}reverseX(){this.x*=-1}reverseY(){this.y*=-1}reverse(i){i==="x"?this.reverseX():i==="y"&&this.reverseY()}}class W extends u{constructor(i){super(i),this.radius=10,this.x=innerWidth/2,this.y=innerHeight/2,this.speed=10;const t=[-1,1];this.direction=new C(g(t),g(t))}draw(){const{PI:i}=Math;this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.radius,0,i*2,!1),this.ctx.fillStyle="rgba(255,255,255, .7)",this.ctx.fill(),this.ctx.closePath()}update(){this.draw(),this.y<this.radius&&this.direction.reverse("y"),this.y>innerHeight&&this.direction.reverse("y"),(this.isCollidingSide("right")||this.isCollidingSide("left"))&&this.direction.reverse("x"),this.x+=this.direction.x*this.speed,this.y+=this.direction.y*this.speed}isCollidingSide(i="left"){return i==="right"?this.isCollidingRight():i==="left"?this.isCollidingLeft():!1}isCollidingLeft(){return this.x<this.radius+o.padding+o.needleWidth}isCollidingRight(){return this.x>innerWidth-this.radius-o.padding-o.needleWidth}}class m extends u{constructor(i,t=0,n="left"){super(i),this.value=t,n==="left"?this.location=o.scoreLocation:n==="right"&&(this.location=innerWidth-o.scoreLocation-10)}draw(){this.ctx.beginPath(),this.ctx.font="40px Arial",this.ctx.fillStyle="rgba(255,255,255, .3)",this.ctx.fillText(this.value,this.location,60),this.ctx.closePath()}update(){this.draw()}increment(){this.value++}decrement(){this.value--}inc(){this.increment()}dec(){this.decrement()}}function v(e,{userNeedle:i,pcNeedle:t,ball:n,userScore:s,pcScore:r,canvas:h}){e.clearRect(0,0,innerWidth,innerHeight),requestAnimationFrame(()=>{v(e,{userScore:s,pcScore:r,userNeedle:i,pcNeedle:t,ball:n,canvas:h})}),i.update(),t.update(),t.y=n.y-t.calculateHeight()/2,t.y>innerHeight-t.calculateHeight()&&(t.y=innerHeight-t.calculateHeight()),n.update(),n.isCollidingSide("left")&&!i.isTouchingBall(n)?(i.lost(),r.inc()):n.isCollidingSide("right")&&!t.isTouchingBall(n)&&(t.lost(),s.inc()),s.update(),r.update(),d.counter++}const a=new d,A=a.element(),c=a.context();document.body.appendChild(A);const M=new y(c,"left",!0),z=new y(c),I=new W(c),B=new m(c,0),O=new m(c,0,"right");v(c,{canvas:a,ball:I,userNeedle:M,pcNeedle:z,userScore:B,pcScore:O});addEventListener("resize",()=>{a.setSize()});
