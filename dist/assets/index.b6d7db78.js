var v=Object.defineProperty;var p=(e,t,i)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var d=(e,t,i)=>(p(e,typeof t!="symbol"?t+"":t,i),i);const H=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const h of r.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}};H();class a{constructor(t){this.ctx=t}}class w extends a{constructor(t,i,n){super(t),this.color=n,this.x=i}draw(){this.ctx.beginPath(),this.ctx.fillStyle=this.color,this.ctx.fillRect(this.x,0,1,innerHeight),this.ctx.closePath()}}const{random:b}=Math,u=(e,t,i)=>S(e).addEventListener(t,i),P=()=>`hsla(${~~(Math.random()*360)}, 100%, 30%, 1)`,S=document.querySelector.bind(document);document.querySelectorAll.bind(document);const g=e=>e[~~(b()*e.length)],f=(e,t)=>setTimeout(t,e),L=(e,t)=>setInterval(t,e);class k{constructor(){this.canvas=document.createElement("canvas"),this.background=[];for(let t=0;t<innerWidth;t++)this.background.push(new w(this.context(),t,"rgba(34,34,34,.7)"));L(1e4,()=>{this.changeBackground(P())}),this.setSize()}changeBackground(t="blue"){for(let i=this.background.length/2;i>=0;i--)f(500+(this.background.length-i),()=>{this.background[i].color=t,this.background[this.background.length-i].color=t})}paintBackground(){this.background.forEach(t=>{t.draw()})}setSize(){this.canvas.width=innerWidth,this.canvas.height=innerHeight}context(){return this.canvas.getContext("2d")}element(){return this.canvas}}const o={padding:20,scoreLocation:100,needleWidth:10,needleSizeDecreaseForALoss:20};class y extends a{constructor(i,n="right",s=!1){super(i);d(this,"mouseMoveHandler",i=>{this.y=i.y-this.calculateHeight()/2});this.score=0,this.width=o.needleWidth,this.height=200,this.color="white",this.side=n,this.y=innerHeight/2,s&&(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?u("canvas","touchmove",this.mouseMoveHandler):u("canvas","mousemove",this.mouseMoveHandler))}calculateHeight(){return this.height+this.score}draw(){this.ctx.beginPath(),this.ctx.fillStyle=this.color;let i=o.padding;this.side=="right"&&(i=innerWidth-o.padding-o.needleWidth),this.ctx.fillRect(i,this.y,this.width,this.calculateHeight()),this.ctx.closePath()}update(){this.y<0&&(this.y=0),this.y>innerHeight-this.calculateHeight()&&(this.y=innerHeight-this.calculateHeight()),this.draw()}isInRange(i,n){return i>this.y&&n<this.y+this.calculateHeight()}isTouchingBall(i){const n=i.y+i.radius,s=i.y-i.radius,r=n>this.y&&n<this.y+this.calculateHeight(),h=s<this.y+this.calculateHeight()&&s>this.y;return r||h}lost(){this.score=this.score-o.needleSizeDecreaseForALoss,this.color="rgba(135, 0, 0, .8)",f(2e3,()=>{this.color="white"})}}class C{constructor(t,i){this.x=t,this.y=i}reverseX(){this.x*=-1}reverseY(){this.y*=-1}reverse(t){t==="x"?this.reverseX():t==="y"&&this.reverseY()}}class W extends a{constructor(t){super(t),this.radius=10,this.x=innerWidth/2,this.y=innerHeight/2,this.speed=10;const i=[-1,1];this.direction=new C(g(i),g(i))}draw(){const{PI:t}=Math;this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.radius,0,t*2,!1),this.ctx.fillStyle="rgba(255,255,255, .7)",this.ctx.fill(),this.ctx.closePath()}update(){this.draw(),this.y<this.radius&&this.direction.reverse("y"),this.y>innerHeight&&this.direction.reverse("y"),(this.isCollidingSide("right")||this.isCollidingSide("left"))&&this.direction.reverse("x"),this.x+=this.direction.x*this.speed,this.y+=this.direction.y*this.speed}isCollidingSide(t="left"){return t==="right"?this.isCollidingRight():t==="left"?this.isCollidingLeft():!1}isCollidingLeft(){return this.x<this.radius+o.padding+o.needleWidth}isCollidingRight(){return this.x>innerWidth-this.radius-o.padding-o.needleWidth}}class x extends a{constructor(t,i=0,n="left"){super(t),this.value=i,n==="left"?this.location=o.scoreLocation:n==="right"&&(this.location=innerWidth-o.scoreLocation-10)}draw(){this.ctx.beginPath(),this.ctx.font="40px Arial",this.ctx.fillStyle="rgba(255,255,255, .3)",this.ctx.fillText(this.value,this.location,60),this.ctx.closePath()}update(){this.draw()}increment(){this.value++}decrement(){this.value--}inc(){this.increment()}dec(){this.decrement()}}function m(e,{userNeedle:t,pcNeedle:i,ball:n,userScore:s,pcScore:r,canvas:h}){h.paintBackground(),requestAnimationFrame(()=>{m(e,{userScore:s,pcScore:r,userNeedle:t,pcNeedle:i,ball:n,canvas:h})}),t.update(),i.update(),i.y=n.y-i.calculateHeight()/2,i.y>innerHeight-i.calculateHeight()&&(i.y=innerHeight-i.calculateHeight()),n.update(),n.isCollidingSide("left")&&!t.isTouchingBall(n)?(t.lost(),r.inc()):n.isCollidingSide("right")&&!i.isTouchingBall(n)&&(i.lost(),s.inc()),s.update(),r.update()}const l=new k,B=l.element(),c=l.context();document.body.appendChild(B);const M=new y(c,"left",!0),A=new y(c),z=new W(c),E=new x(c,0),R=new x(c,0,"right");m(c,{canvas:l,ball:z,userNeedle:M,pcNeedle:A,userScore:E,pcScore:R});addEventListener("resize",()=>{l.setSize()});
